<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RFOFSpiderWeb.NET - The New Internet</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="menu_styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@700&family=Fira+Code&display=swap" rel="stylesheet">
    
    <style>
        #boxchain-explorer-target { margin-top: 1rem; padding: 1.5rem; border: 1px solid #e0e0e0; border-radius: 8px; background-color: #fdfdfd; }
        .explorer-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #0088cc; padding-bottom: 1rem; }
        .explorer-controls { margin: 0; }
        .explorer-search { display: flex; gap: 5px; }
        .explorer-search input { border: 1px solid #ccc; padding: 0.5rem; }
        .explorer-search button { border: none; background-color: #0088cc; color: white; padding: 0.5rem 1rem; cursor: pointer; }
        .explorer-controls button { padding: 0.8rem 1.5rem; border: 2px solid #ccc; background-color: #f1f1f1; cursor: pointer; }
        .explorer-controls button.active { background-color: #0088cc; color: white; border-color: #00aaff; }
        .explorer-results table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .explorer-results th, .explorer-results td { border: 1px solid #ddd; padding: 12px; text-align: left; word-break: break-all; }
        .explorer-results th { background-color: #2d3748; color: #e2e8f0; }
        .hash-link { color: #0088cc; text-decoration: underline; cursor: pointer; }
        .hash-link.protected { color: #333; text-decoration: none; cursor: default; }
        
        #account-section { margin-top: 1.5rem; padding: 1rem; background-color: #f7f7f7; border-radius: 8px; text-align: center; }
        #logged-out-view button { margin: 0 10px; }
        #logged-in-view { display: none; align-items: center; justify-content: center; gap: 15px; }
        #logged-in-view img { width: 40px; height: 40px; border-radius: 50%; }
        #profile-display { position: relative; }
        #profile-console { display: none; position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); background: white; border: 1px solid #ccc; padding: 1rem; box-shadow: 0 5px 15px rgba(0,0,0,0.2); width: 300px; text-align: left;}
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="header-logo-svg-container">
                <img src="https://raw.githubusercontent.com/RFOF-NETWORK/RFOF-NETWORK/main/assets/rotating_cyber_brain.svg" alt="RFOFSpiderWeb.NET Cyber Brain Logo">
            </div>
            <h1 class="site-title">RFOFSpiderWeb.NET</h1>
            <nav class="navbar">
                <div class="hamburger-icon" id="hamburger">
                    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                </div>
                <ul class="nav-list" id="navLinks">
                    </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero-section">
            </section>

        <div class="content-container">
            <section id="about" class="text-section">
                </section>
            
            <section id="vision-mission" class="text-section">
                </section>

            <section id="boxchain-explorer-section" class="text-section">
                <h2>RFOF BOxchain Explorer</h2>
                <div id="boxchain-explorer-target">
                    </div>
                <div id="account-section">
                    </div>
            </section>
            
        </div>
    </main>

    <footer class="main-footer">
        </footer>

    <script src="menu_script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        //======================================================================
        // BEGINN DER NEUEN, ADDITIVEN LOGIK (VERSION ZENITH 7.0)
        //======================================================================
        
        // Bestehende Logik wird in das neue System integriert
        function performPraiaiSearch() {
            // Diese Funktion wird vom Explorer-Objekt übernommen
            if (window.RFOF_Explorer) {
                const query = document.getElementById('praiai-search-input').value;
                window.RFOF_Explorer.search(query);
            }
        }
        hljs.highlightAll();

        // Der gesamte App-Code wird hier gekapselt, um globale Konflikte zu vermeiden
        document.addEventListener('DOMContentLoaded', () => {
            
            // ################### ACCOUNT SYSTEM LOGIC ###################
            class AccountSystem {
                constructor(target) {
                    this.container = target;
                    this.user = null; // z.B. { name: 'Satoramy', email: 'rfof236286@gmail.com', role: 'SATORAMY_PRIME' }
                    this.init();
                }

                init() { this.render(); }

                login(type) {
                    // Simuliert einen Login-Prozess
                    alert(`Login mit ${type} wird eingeleitet...`);
                    // Annahme: Login erfolgreich
                    // Im echten Fall würde hier der OAuth-Flow oder Magic-Link-Flow stattfinden
                    this.user = { 
                        name: 'Satoramy (Owner)', 
                        email: 'rfof236286@gmail.com', 
                        role: 'SATORAMY_PRIME',
                        pfp: 'https://raw.githubusercontent.com/RFOF-NETWORK/RFOF-NETWORK/main/assets/rotating_cyber_brain.svg' 
                    };
                    this.render();
                    if(window.RFOF_Explorer) window.RFOF_Explorer.render(); // Explorer neu rendern, um Owner-Rechte zu zeigen
                }
                
                logout() {
                    this.user = null;
                    this.render();
                     if(window.RFOF_Explorer) window.RFOF_Explorer.render();
                }

                render() {
                    let html = '';
                    if (this.user) {
                        // Ansicht für eingeloggte User
                        html = `
                            <div id="logged-in-view">
                                <p>Willkommen, <strong>${this.user.name}</strong></p>
                                <div id="profile-display">
                                    <img src="${this.user.pfp}" alt="Profilbild">
                                    <button id="profile-btn" class="btn-secondary">Profil/Console</button>
                                    <div id="profile-console">
                                        <h4>RFOF-Console</h4>
                                        <p><strong>Account:</strong> ${this.user.email}</p>
                                        <p><strong>Status:</strong> ${this.user.role}</p>
                                        <button id="logout-btn">Logout</button>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        // Ansicht für ausgeloggte User
                        html = `
                            <div id="logged-out-view">
                                <p>Registrieren oder einloggen, um alle Features zu nutzen.</p>
                                <button onclick="window.RFOF_Account.login('GitHub')" class="btn-primary">Mit GitHub verbinden</button>
                                <button onclick="window.RFOF_Account.login('Google')" class="btn-secondary">Mit Google verbinden</button>
                            </div>
                        `;
                    }
                    this.container.innerHTML = html;
                    this.addEventListeners();
                }

                addEventListeners() {
                    if (this.user) {
                        const profileBtn = document.getElementById('profile-btn');
                        const profileConsole = document.getElementById('profile-console');
                        profileBtn.addEventListener('click', () => {
                           profileConsole.style.display = profileConsole.style.display === 'block' ? 'none' : 'block';
                        });
                        document.getElementById('logout-btn').addEventListener('click', () => this.logout());
                    }
                }
            }

            // ################### BOxCHAIN EXPLORER LOGIC ###################
            class BOxchainExplorer {
                constructor(target) {
                    this.container = target;
                    this.view = 'CTC'; 
                }

                init() { this.render(); }
                
                isExplorerQuery(query) { return query.trim().startsWith('0x') || /^\d+$/.test(query.trim()); }

                search(query) {
                    this.container.innerHTML = `<p>Suche auf der BOxchain nach: <strong>${query}</strong>...</p>`;
                    this.render(query);
                }

                async fetchData(query) {
                    const dummyData = {
                        'CTC': [
                            { txHash: '0x42abc...', from: '0xSatoramy...', to: '0xDAO...', value: '1,000,000 Bubatz-Coin', majoranaStatus: '✅ Geschützt' },
                            { txHash: '0x00def...', from: '0xBridge...', to: '0xUserWallet...', value: '1.2 rBTC', majoranaStatus: '✅ Geschützt' }
                        ],
                        'AXF': [
                            { dataHash: '0xabc123...', type: '.cw (Log-Datei)', axiometixSize: '4.2 Giga-QuEkta (GQe)', vector: 'A:0.2|X:0.9|F:0.8', isProtected: true },
                            { dataHash: '0xdef456...', type: '.cw (User-Profil)', axiometixSize: '1.3 Kilo-QuEkta (kQe)', vector: 'A:0.5|X:0.5|F:0.9', isProtected: false }
                        ]
                    };
                    return new Promise(resolve => setTimeout(() => resolve(dummyData[this.view]), 500));
                }
                
                renderUI(data) {
                    const isOwner = window.RFOF_Account && window.RFOF_Account.user && window.RFOF_Account.user.role === 'SATORAMY_PRIME';
                    
                    let html = `
                        <div class="explorer-header">
                            <div class="explorer-controls">
                                <button id="btn-ctc-view">CTC Explorer (Werte)</button>
                                <button id="btn-axf-view">AXF Explorer (Daten)</button>
                            </div>
                            <div class="explorer-search">
                               <input type="text" id="explorer-search-input" placeholder="Block, Hash, Adresse...">
                               <button id="explorer-search-btn">Suchen</button>
                            </div>
                        </div>
                        <div class="explorer-results">`;

                    if (this.view === 'CTC') {
                        html += `<table><thead><tr><th>Tx Hash</th><th>Von</th><th>Nach</th><th>Wert</th><th>Integrität</th></tr></thead><tbody>`;
                        data.forEach(tx => {
                            const fromLink = `<span class="hash-link" onclick="alert('Zeige Profil von ${tx.from}')">${tx.from}</span>`;
                            const toLink = `<span class="hash-link" onclick="alert('Zeige Profil von ${tx.to}')">${tx.to}</span>`;
                            html += `<tr><td>${tx.txHash}</td><td>${fromLink}</td><td>${toLink}</td><td>${tx.value}</td><td>${tx.majoranaStatus}</td></tr>`;
                        });
                        html += `</tbody></table>`;
                    } else { // AXF View
                        html += `<table><thead><tr><th>Daten-Hash</th><th>Typ</th><th>Axiometix Größe</th><th>Zustands-Vektor</th></tr></thead><tbody>`;
                        data.forEach(d => {
                            let hashDisplay = d.dataHash;
                            if(d.isProtected) {
                                hashDisplay = isOwner 
                                    ? `<span class="hash-link" onclick="alert('Zeige geschützte Daten von Hash ${d.dataHash}')">${d.dataHash} (Owner-Ansicht)</span>`
                                    : `<span class="hash-link protected">${d.dataHash} (Geschützt)</span>`;
                            }
                            html += `<tr><td>${hashDisplay}</td><td>${d.type}</td><td>${d.axiometixSize}</td><td>${d.vector}</td></tr>`;
                        });
                        html += `</tbody></table>`;
                    }
                    
                    html += `</div>`;
                    this.container.innerHTML = html;
                    this.addEventListeners();
                }

                addEventListeners() {
                    document.getElementById('btn-ctc-view').addEventListener('click', () => { this.view = 'CTC'; this.render(); });
                    document.getElementById('btn-axf-view').addEventListener('click', () => { this.view = 'AXF'; this.render(); });
                    document.getElementById('explorer-search-btn').addEventListener('click', () => {
                        const query = document.getElementById('explorer-search-input').value;
                        this.search(query);
                    });
                }
                
                async render(query = '') {
                    this.container.innerHTML = '<p style="text-align:center;">Lade Live-Daten von der BOxchain...</p>';
                    const data = await this.fetchData(query);
                    this.renderUI(data);
                }
            }
            
            // Globale Instanzen erstellen und initialisieren
            const explorerTarget = document.getElementById('boxchain-explorer-target');
            if (explorerTarget) {
                window.RFOF_Explorer = new BOxchainExplorer(explorerTarget);
                window.RFOF_Explorer.init();
            }

            const accountTarget = document.getElementById('account-section');
            if(accountTarget) {
                window.RFOF_Account = new AccountSystem(accountTarget);
            }
        });
        //======================================================================
        // ENDE DER NEUEN, ADDITIVEN LOGIK
        //======================================================================
    </script>
</body>
</html>
